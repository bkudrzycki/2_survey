YS6_9_6 == 1 ~ 1,
YS6_9_7 == 1 ~ 1,
YS6_9_8 == 1 ~ 0,
YS6_9_9 == 1 ~ 1)
) %>%
select(IDYouth, YS6_2, YS6_3, YS6_5, walls, floor, roof)
df <- ys_baseline %>%
mutate(walls = case_when(YS6_7_1 == 1 ~ 0, # improved wall materials
YS6_7_2 == 1 ~ 0,
YS6_7_3 == 1 ~ 0,
YS6_7_4 == 1 ~ 0,
YS6_7_5 == 1 ~ 1,
YS6_7_6 == 1 ~ 1,
YS6_7_7 == 1 ~ 1),
floor = case_when(YS6_8_1 == 1 ~ 0, # improved floor materials
YS6_8_2 == 1 ~ 0,
YS6_8_3 == 1 ~ 0,
YS6_8_4 == 1 ~ 0,
YS6_8_5 == 1 ~ 0,
YS6_8_6 == 1 ~ 1,
YS6_8_7 == 1 ~ 1,
YS6_8_8 == 1 ~ 0,
YS6_8_9 == 1 ~ 1,
YS6_8_11 == 1 ~ 1),
roof = case_when(YS6_9_1 == 1 ~ 0, # improved floor materials
YS6_9_2 == 1 ~ 0,
YS6_9_3 == 1 ~ 0,
YS6_9_5 == 1 ~ 0,
YS6_9_6 == 1 ~ 0,
YS6_9_7 == 1 ~ 1,
YS6_9_8 == 1 ~ 1,
YS6_9_9 == 1 ~ 1)
) %>%
select(IDYouth, YS6_2, YS6_3, YS6_5, walls, floor, roof)
table(df$roof)
df <- ys_baseline %>%
mutate(walls = case_when(YS6_7_1 == 1 ~ 0, # improved wall materials
YS6_7_2 == 1 ~ 0,
YS6_7_3 == 1 ~ 0,
YS6_7_4 == 1 ~ 0,
YS6_7_5 == 1 ~ 1,
YS6_7_6 == 1 ~ 1,
YS6_7_7 == 1 ~ 1),
floor = case_when(YS6_8_1 == 1 ~ 0, # improved floor materials
YS6_8_2 == 1 ~ 0,
YS6_8_3 == 1 ~ 0,
YS6_8_4 == 1 ~ 0,
YS6_8_5 == 1 ~ 0,
YS6_8_6 == 1 ~ 1,
YS6_8_7 == 1 ~ 1,
YS6_8_8 == 1 ~ 0,
YS6_8_9 == 1 ~ 1,
YS6_8_11 == 1 ~ 1),
roof = case_when(YS6_9_1 == 1 ~ 0, # improved floor materials
YS6_9_2 == 1 ~ 0,
YS6_9_3 == 1 ~ 0,
YS6_9_5 == 1 ~ 0,
YS6_9_6 == 1 ~ 1,
YS6_9_7 == 1 ~ 1,
YS6_9_8 == 1 ~ 1,
YS6_9_9 == 1 ~ 1)
) %>%
select(IDYouth, YS6_2, YS6_3, YS6_5, walls, floor, roof)
table(df$roof)
df <- ys_baseline %>%
mutate(walls = case_when(YS6_7_1 == 1 ~ 0, # improved wall materials
YS6_7_2 == 1 ~ 0,
YS6_7_3 == 1 ~ 0,
YS6_7_4 == 1 ~ 0,
YS6_7_5 == 1 ~ 1,
YS6_7_6 == 1 ~ 1,
YS6_7_7 == 1 ~ 1),
floor = case_when(YS6_8_1 == 1 ~ 0, # improved floor materials
YS6_8_2 == 1 ~ 0,
YS6_8_3 == 1 ~ 0,
YS6_8_4 == 1 ~ 0,
YS6_8_5 == 1 ~ 0,
YS6_8_6 == 1 ~ 1,
YS6_8_7 == 1 ~ 1,
YS6_8_8 == 1 ~ 0,
YS6_8_9 == 1 ~ 1,
YS6_8_11 == 1 ~ 1),
roof = case_when(YS6_9_1 == 1 ~ 0, # improved floor materials
YS6_9_2 == 1 ~ 0,
YS6_9_3 == 1 ~ 0,
YS6_9_5 == 1 ~ 0,
YS6_9_6 == 1 ~ 0,
YS6_9_7 == 1 ~ 1,
YS6_9_8 == 1 ~ 1,
YS6_9_9 == 1 ~ 1)
) %>%
select(IDYouth, YS6_2, YS6_3, YS6_5, walls, floor, roof)
df <- ys_baseline %>%
mutate(walls = case_when(YS6_7_1 == 1 ~ 0, # improved wall materials
YS6_7_2 == 1 ~ 0,
YS6_7_3 == 1 ~ 0,
YS6_7_4 == 1 ~ 0,
YS6_7_5 == 1 ~ 1,
YS6_7_6 == 1 ~ 1,
YS6_7_7 == 1 ~ 1),
floor = case_when(YS6_8_1 == 1 ~ 0, # improved floor materials
YS6_8_2 == 1 ~ 0,
YS6_8_3 == 1 ~ 0,
YS6_8_4 == 1 ~ 0,
YS6_8_5 == 1 ~ 0,
YS6_8_6 == 1 ~ 1,
YS6_8_7 == 1 ~ 1,
YS6_8_8 == 1 ~ 0,
YS6_8_9 == 1 ~ 1,
YS6_8_11 == 1 ~ 1),
roof = case_when(YS6_9_1 == 1 ~ 0, # improved floor materials
YS6_9_2 == 1 ~ 0,
YS6_9_3 == 1 ~ 0,
YS6_9_5 == 1 ~ 0,
YS6_9_6 == 1 ~ 0,
YS6_9_7 == 1 ~ 1,
YS6_9_8 == 1 ~ 1,
YS6_9_9 == 1 ~ 1)
) %>%
select(IDYouth, YS6_2, YS6_3, YS6_5, walls, floor, roof, contains(YS6_11))
df <- ys_baseline %>%
mutate(walls = case_when(YS6_7_1 == 1 ~ 0, # improved wall materials
YS6_7_2 == 1 ~ 0,
YS6_7_3 == 1 ~ 0,
YS6_7_4 == 1 ~ 0,
YS6_7_5 == 1 ~ 1,
YS6_7_6 == 1 ~ 1,
YS6_7_7 == 1 ~ 1),
floor = case_when(YS6_8_1 == 1 ~ 0, # improved floor materials
YS6_8_2 == 1 ~ 0,
YS6_8_3 == 1 ~ 0,
YS6_8_4 == 1 ~ 0,
YS6_8_5 == 1 ~ 0,
YS6_8_6 == 1 ~ 1,
YS6_8_7 == 1 ~ 1,
YS6_8_8 == 1 ~ 0,
YS6_8_9 == 1 ~ 1,
YS6_8_11 == 1 ~ 1),
roof = case_when(YS6_9_1 == 1 ~ 0, # improved floor materials
YS6_9_2 == 1 ~ 0,
YS6_9_3 == 1 ~ 0,
YS6_9_5 == 1 ~ 0,
YS6_9_6 == 1 ~ 0,
YS6_9_7 == 1 ~ 1,
YS6_9_8 == 1 ~ 1,
YS6_9_9 == 1 ~ 1)
) %>%
select(IDYouth, YS6_2, YS6_3, YS6_5, walls, floor, roof, contains("YS6_11"))
prn<-psych::principal(df[2:4], rotate="varimax", nfactors=3,covar=T, scores=TRUE)
index=prn$scores[,1]
newdata<-mutate(mydata2$data2,quintile=as.factor(cut(index,breaks=5,labels=nlab)))
hist(index)
prn<-psych::principal(df[2:4], rotate="varimax", nfactors=10,covar=T, scores=TRUE)
prn<-psych::principal(df[2:4], rotate="varimax", nfactors=4,covar=T, scores=TRUE)
prn<-psych::principal(df[2:18], rotate="varimax", nfactors=17,covar=T, scores=TRUE)
index=prn$scores[,1]
newdata<-mutate(mydata2$data2,quintile=as.factor(cut(index,breaks=5,labels=nlab)))
hist(index)
index
View(prn)
table(YS6_12)
table(ys_baselineYS6_12)
table(ys_baseline$YS6_12)
table(ys_baseline$YS6_4_0)
table(ys_baseline$YS6_4_1)
table(ys_baseline$YS6_4_2)
table(ys_baseline$YS6_4_3)
table(ys_baseline$YS6_4_4)
table(ys_baseline$YS6_4_5)
df <- ys_baseline %>%
mutate(water = case_when(YS6_4_0 == 1 ~ 0,
YS6_4_1 == 1 ~ 0,
YS6_4_2 == 1 ~ 0,
YS6_4_3 == 1 ~ 1,
YS6_4_4 == 1 ~ 0),
walls = case_when(YS6_7_1 == 1 ~ 0, # improved wall materials
YS6_7_2 == 1 ~ 0,
YS6_7_3 == 1 ~ 0,
YS6_7_4 == 1 ~ 0,
YS6_7_5 == 1 ~ 1,
YS6_7_6 == 1 ~ 1,
YS6_7_7 == 1 ~ 1),
floor = case_when(YS6_8_1 == 1 ~ 0, # improved floor materials
YS6_8_2 == 1 ~ 0,
YS6_8_3 == 1 ~ 0,
YS6_8_4 == 1 ~ 0,
YS6_8_5 == 1 ~ 0,
YS6_8_6 == 1 ~ 1,
YS6_8_7 == 1 ~ 1,
YS6_8_8 == 1 ~ 0,
YS6_8_9 == 1 ~ 1,
YS6_8_11 == 1 ~ 1),
roof = case_when(YS6_9_1 == 1 ~ 0, # improved floor materials
YS6_9_2 == 1 ~ 0,
YS6_9_3 == 1 ~ 0,
YS6_9_5 == 1 ~ 0,
YS6_9_6 == 1 ~ 0,
YS6_9_7 == 1 ~ 1,
YS6_9_8 == 1 ~ 1,
YS6_9_9 == 1 ~ 1)
) %>%
select(IDYouth, YS6_2, YS6_3, YS6_5, walls, floor, roof, contains("YS6_11"))
df <- ys_baseline %>%
mutate(water = case_when(YS6_4_0 == 1 ~ 0,
YS6_4_1 == 1 ~ 0,
YS6_4_2 == 1 ~ 0,
YS6_4_3 == 1 ~ 1,
YS6_4_4 == 1 ~ 0),
walls = case_when(YS6_7_1 == 1 ~ 0, # improved wall materials
YS6_7_2 == 1 ~ 0,
YS6_7_3 == 1 ~ 0,
YS6_7_4 == 1 ~ 0,
YS6_7_5 == 1 ~ 1,
YS6_7_6 == 1 ~ 1,
YS6_7_7 == 1 ~ 1),
floor = case_when(YS6_8_1 == 1 ~ 0, # improved floor materials
YS6_8_2 == 1 ~ 0,
YS6_8_3 == 1 ~ 0,
YS6_8_4 == 1 ~ 0,
YS6_8_5 == 1 ~ 0,
YS6_8_6 == 1 ~ 1,
YS6_8_7 == 1 ~ 1,
YS6_8_8 == 1 ~ 0,
YS6_8_9 == 1 ~ 1,
YS6_8_11 == 1 ~ 1),
roof = case_when(YS6_9_1 == 1 ~ 0, # improved floor materials
YS6_9_2 == 1 ~ 0,
YS6_9_3 == 1 ~ 0,
YS6_9_5 == 1 ~ 0,
YS6_9_6 == 1 ~ 0,
YS6_9_7 == 1 ~ 1,
YS6_9_8 == 1 ~ 1,
YS6_9_9 == 1 ~ 1)
) %>%
select(IDYouth, YS6_2, YS6_3, YS6_5, water, walls, floor, roof, contains("YS6_11"))
prn<-psych::principal(df[2:19], rotate="varimax", nfactors=18,covar=T, scores=TRUE)
index=prn$scores[,1]
newdata<-mutate(mydata2$data2,quintile=as.factor(cut(index,breaks=5,labels=nlab)))
hist(index)
prn<-psych::principal(df[2:19], rotate="varimax", nfactors=18,covar=T, scores=TRUE)
index=prn$scores[,1]
hist(index)
index
prn<-psych::principal(df[2:19], rotate="varimax", nfactors=3,covar=T, scores=TRUE)
index=prn$scores[,1]
hist(index)
prn<-psych::principal(df[2:19], rotate="varimax", nfactors=4,covar=T, scores=TRUE)
index=prn$scores[,1]
hist(index)
prn<-psych::principal(df[2:19], rotate="varimax", nfactors=2,covar=T, scores=TRUE)
index=prn$scores[,1]
hist(index)
prn<-psych::principal(df[2:19], rotate="varimax", nfactors=1,covar=T, scores=TRUE)
index=prn$scores[,1]
hist(index)
prn<-psych::principal(df[2:19], rotate="varimax", nfactors=6,covar=T, scores=TRUE)
index=prn$scores[,1]
hist(index)
prn<-psych::principal(df[2:19], rotate="varimax", nfactors=7,covar=T, scores=TRUE)
index=prn$scores[,1]
hist(index)
index
prn<-psych::principal(df[2:19], rotate="varimax", nfactors=8,covar=T, scores=TRUE)
index=prn$scores[,1]
hist(index)
prn<-psych::principal(df[2:19], rotate="varimax", nfactors=3,covar=T, scores=TRUE)
index=prn$scores[,1]
hist(index)
table(ys_baseline$YS6_1)
df <- ys_baseline %>%
mutate(housing = ifelse(YS6_1 %in% c(1,2,6,7), 1, 0),
water = case_when(YS6_4_0 == 1 ~ 0,
YS6_4_1 == 1 ~ 0,
YS6_4_2 == 1 ~ 0,
YS6_4_3 == 1 ~ 1,
YS6_4_4 == 1 ~ 0),
walls = case_when(YS6_7_1 == 1 ~ 0, # improved wall materials
YS6_7_2 == 1 ~ 0,
YS6_7_3 == 1 ~ 0,
YS6_7_4 == 1 ~ 0,
YS6_7_5 == 1 ~ 1,
YS6_7_6 == 1 ~ 1,
YS6_7_7 == 1 ~ 1),
floor = case_when(YS6_8_1 == 1 ~ 0, # improved floor materials
YS6_8_2 == 1 ~ 0,
YS6_8_3 == 1 ~ 0,
YS6_8_4 == 1 ~ 0,
YS6_8_5 == 1 ~ 0,
YS6_8_6 == 1 ~ 1,
YS6_8_7 == 1 ~ 1,
YS6_8_8 == 1 ~ 0,
YS6_8_9 == 1 ~ 1,
YS6_8_11 == 1 ~ 1),
roof = case_when(YS6_9_1 == 1 ~ 0, # improved floor materials
YS6_9_2 == 1 ~ 0,
YS6_9_3 == 1 ~ 0,
YS6_9_5 == 1 ~ 0,
YS6_9_6 == 1 ~ 0,
YS6_9_7 == 1 ~ 1,
YS6_9_8 == 1 ~ 1,
YS6_9_9 == 1 ~ 1)
) %>%
select(IDYouth, YS6_2, YS6_3, YS6_5, water, walls, floor, roof, contains("YS6_11"))
df <- ys_baseline %>%
mutate(housing = ifelse(YS6_1 %in% c(1,2,6,7), 1, 0),
water = case_when(YS6_4_0 == 1 ~ 0,
YS6_4_1 == 1 ~ 0,
YS6_4_2 == 1 ~ 0,
YS6_4_3 == 1 ~ 1,
YS6_4_4 == 1 ~ 0),
walls = case_when(YS6_7_1 == 1 ~ 0, # improved wall materials
YS6_7_2 == 1 ~ 0,
YS6_7_3 == 1 ~ 0,
YS6_7_4 == 1 ~ 0,
YS6_7_5 == 1 ~ 1,
YS6_7_6 == 1 ~ 1,
YS6_7_7 == 1 ~ 1),
floor = case_when(YS6_8_1 == 1 ~ 0, # improved floor materials
YS6_8_2 == 1 ~ 0,
YS6_8_3 == 1 ~ 0,
YS6_8_4 == 1 ~ 0,
YS6_8_5 == 1 ~ 0,
YS6_8_6 == 1 ~ 1,
YS6_8_7 == 1 ~ 1,
YS6_8_8 == 1 ~ 0,
YS6_8_9 == 1 ~ 1,
YS6_8_11 == 1 ~ 1),
roof = case_when(YS6_9_1 == 1 ~ 0, # improved floor materials
YS6_9_2 == 1 ~ 0,
YS6_9_3 == 1 ~ 0,
YS6_9_5 == 1 ~ 0,
YS6_9_6 == 1 ~ 0,
YS6_9_7 == 1 ~ 1,
YS6_9_8 == 1 ~ 1,
YS6_9_9 == 1 ~ 1)
) %>%
select(IDYouth, YS6_2, YS6_3, YS6_5, housing, water, walls, floor, roof, contains("YS6_11"))
prn<-psych::principal(df[2:19], rotate="varimax", nfactors=3,covar=T, scores=TRUE)
index=prn$scores[,1]
hist(index)
df <- ys_baseline %>%
mutate(housing = ifelse(YS6_1 %in% c(1,2,6,7), 1, 0),
water = case_when(YS6_4_0 == 1 ~ 0,
YS6_4_1 == 1 ~ 0,
YS6_4_2 == 1 ~ 0,
YS6_4_3 == 1 ~ 1,
YS6_4_4 == 1 ~ 0),
walls = case_when(YS6_7_1 == 1 ~ 0, # improved wall materials
YS6_7_2 == 1 ~ 0,
YS6_7_3 == 1 ~ 0,
YS6_7_4 == 1 ~ 0,
YS6_7_5 == 1 ~ 1,
YS6_7_6 == 1 ~ 1,
YS6_7_7 == 1 ~ 1),
floor = case_when(YS6_8_1 == 1 ~ 0, # improved floor materials
YS6_8_2 == 1 ~ 0,
YS6_8_3 == 1 ~ 0,
YS6_8_4 == 1 ~ 0,
YS6_8_5 == 1 ~ 0,
YS6_8_6 == 1 ~ 1,
YS6_8_7 == 1 ~ 1,
YS6_8_8 == 1 ~ 0,
YS6_8_9 == 1 ~ 1,
YS6_8_11 == 1 ~ 1),
roof = case_when(YS6_9_1 == 1 ~ 0, # improved floor materials
YS6_9_2 == 1 ~ 0,
YS6_9_3 == 1 ~ 0,
YS6_9_5 == 1 ~ 0,
YS6_9_6 == 1 ~ 0,
YS6_9_7 == 1 ~ 1,
YS6_9_8 == 1 ~ 1,
YS6_9_9 == 1 ~ 1)
) %>%
select(YS6_2, YS6_3, YS6_5, housing, water, walls, floor, roof, contains("YS6_11"))
prn<-psych::principal(df, rotate="varimax", nfactors=3,covar=T, scores=TRUE)
index=prn$scores[,1]
ys_baseline <- rbind(ys_baseline, index)
df <- ys_baseline %>%
mutate(housing = ifelse(YS6_1 %in% c(1,2,6,7), 1, 0),
water = case_when(YS6_4_0 == 1 ~ 0,
YS6_4_1 == 1 ~ 0,
YS6_4_2 == 1 ~ 0,
YS6_4_3 == 1 ~ 1,
YS6_4_4 == 1 ~ 0),
walls = case_when(YS6_7_1 == 1 ~ 0, # improved wall materials
YS6_7_2 == 1 ~ 0,
YS6_7_3 == 1 ~ 0,
YS6_7_4 == 1 ~ 0,
YS6_7_5 == 1 ~ 1,
YS6_7_6 == 1 ~ 1,
YS6_7_7 == 1 ~ 1),
floor = case_when(YS6_8_1 == 1 ~ 0, # improved floor materials
YS6_8_2 == 1 ~ 0,
YS6_8_3 == 1 ~ 0,
YS6_8_4 == 1 ~ 0,
YS6_8_5 == 1 ~ 0,
YS6_8_6 == 1 ~ 1,
YS6_8_7 == 1 ~ 1,
YS6_8_8 == 1 ~ 0,
YS6_8_9 == 1 ~ 1,
YS6_8_11 == 1 ~ 1),
roof = case_when(YS6_9_1 == 1 ~ 0, # improved floor materials
YS6_9_2 == 1 ~ 0,
YS6_9_3 == 1 ~ 0,
YS6_9_5 == 1 ~ 0,
YS6_9_6 == 1 ~ 0,
YS6_9_7 == 1 ~ 1,
YS6_9_8 == 1 ~ 1,
YS6_9_9 == 1 ~ 1)
) %>%
select(YS6_2, YS6_3, YS6_5, housing, water, walls, floor, roof, contains("YS6_11"))
prn<-psych::principal(df, rotate="varimax", nfactors=3,covar=T, scores=TRUE)
index=prn$scores[,1]
ys_baseline <- rbind(ys_baseline, index)
ys_baseline$index
ys_baseline <- cbind(ys_baseline, index)
ys_baseline$index
index=as.data.frame(prn$scores[,1])
View(index)
index=as.data.frame(prn$scores[,1] = index)
index=as.data.frame(index = prn$scores[,1])
prn<-psych::principal(df, rotate="varimax", nfactors=3,covar=T, scores=TRUE)
index<-prn$scores[,1]
ys_baseline <- cbind(ys_baseline, index)
nlab<-c(1,2,3,4,5)
index<-mutate(ys_baseline$index,quintile=as.factor(cut(index,breaks=5,labels=nlab)))
prn<-psych::principal(df, rotate="varimax", nfactors=3,covar=T, scores=TRUE)
index<-prn$scores[,1]
nlab<-c(1,2,3,4,5)
ys_baseline <- cbind(ys_baseline, index) %>%
mutate(wealth_quintile = as.factor(cut(index, breaks = 5, labels = nlab)))
packages <- c("haven", "tinytex", "survey", "bookdown", "gtsummary", "janitor", "labelled", "TraMineR", "cluster", "survival", "survminer", "plm", "pglm", "texreg", "flextable", "kableExtra", "stargazer", "ggpubr", "tidyverse")
options(repos = c(CRAN = "http://cran.rstudio.com"))
# install packages not yet installed
installed_packages <- packages %in% rownames(installed.packages())
if (any(installed_packages == FALSE)) {
install.packages(packages[!installed_packages], silent = TRUE)
}
# load packages
invisible(lapply(packages, library, character.only = TRUE))
flextable:::usepackage_latex("hhline")
rm(packages, installed_packages)
# load data
# source("../code/master.R") # to rerun all code periodically
load("../data/ys_panel.rda")
load("../data/ys_panel_labels.rda")
ys_baseline <- ys_panel %>% filter(wave == 0)
# load functions
source("../functions/paste_matrix.R")
source("../functions/extract_pglm.R")
# load code chunks
knitr::read_chunk('../code/survey_body.R')
knitr::read_chunk('../code/survey_appendix.R')
# set R options
ggplot2::theme_set(ggplot2::theme_bw())
options(scipen=2, digits=2)
# set knitr and flextable options
set_flextable_defaults(font.family = 'Palatino')
knitr::opts_chunk$set(message=FALSE,
warning=FALSE,
echo = FALSE,
cache = TRUE,
fig.path='figures/',
out.extra = "",
floatfoot.envs = c("figure", "table", "longtabu"))
prn<-psych::principal(df, rotate="varimax", nfactors=3,covar=T, scores=TRUE)
index<-prn$scores[,1]
nlab<-c(1,2,3,4,5)
ys_baseline <- cbind(ys_baseline, index) %>%
mutate(wealth_quintile = as.factor(cut(index, breaks = 5, labels = nlab)))
ys_baseline$wealth_quintile
ys_baseline$index
source("/Users/Shared/Bart/Youth Employment/1_survey/code/prep/survey_cleaning.R", echo=TRUE)
source("/Users/Shared/Bart/Youth Employment/1_survey/code/prep/survey_cleaning.R", echo=TRUE)
length(x)
prn<-psych::principal(x[2:len(x)], rotate="varimax", nfactors=3,covar=T, scores=TRUE)
prn<-psych::principal(x[2:length(x)], rotate="varimax", nfactors=3,covar=T, scores=TRUE)
source("/Users/Shared/Bart/Youth Employment/1_survey/code/prep/survey_cleaning.R", echo=TRUE)
packages <- c("haven", "tinytex", "survey", "bookdown", "gtsummary", "janitor", "labelled", "TraMineR", "cluster", "survival", "survminer", "psych", "plm", "pglm", "texreg", "flextable", "kableExtra", "stargazer", "ggpubr", "tidyverse")
options(repos = c(CRAN = "http://cran.rstudio.com"))
# install packages not yet installed
installed_packages <- packages %in% rownames(installed.packages())
if (any(installed_packages == FALSE)) {
install.packages(packages[!installed_packages], silent = TRUE)
}
# load packages
invisible(lapply(packages, library, character.only = TRUE))
flextable:::usepackage_latex("hhline")
rm(packages, installed_packages)
# load data
# source("../code/master.R") # to rerun all code periodically
load("../data/ys_panel.rda")
load("../data/ys_panel_labels.rda")
ys_baseline <- ys_panel %>% filter(wave == 0)
# load functions
source("../functions/paste_matrix.R")
source("../functions/extract_pglm.R")
# load code chunks
knitr::read_chunk('../code/survey_body.R')
knitr::read_chunk('../code/survey_appendix.R')
# set R options
ggplot2::theme_set(ggplot2::theme_bw())
options(scipen=2, digits=2)
# set knitr and flextable options
set_flextable_defaults(font.family = 'Palatino')
knitr::opts_chunk$set(message=FALSE,
warning=FALSE,
echo = FALSE,
cache = TRUE,
fig.path='figures/',
out.extra = "",
floatfoot.envs = c("figure", "table", "longtabu"))
