options(repos = c(CRAN = "http://cran.rstudio.com"))
# install packages not yet installed
installed_packages <- packages %in% rownames(installed.packages())
if (any(installed_packages == FALSE)) {
install.packages(packages[!installed_packages], silent = TRUE)
}
# load packages
invisible(lapply(packages, library, character.only = TRUE))
rm(packages, installed_packages)
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1)
x <- df %>% tbl_cross(row = wave_0, col = wave_1, statistic = "{n}\n({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = {{wave_from}}, col = {{wave_to}}, statistic = "\n[{p}%]", percent = "column", missing = "no")
x <- df %>% tbl_cross(row = wave_0, col = wave_1, statistic = "{n}\n({p}%)", percent = "row", missing = "no")
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "\n[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], " \n", z2[2:7,6:11]), 6)
x
print(x)
display(x)
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "\n[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\n", z2[2:7,6:11]), 6)
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\n", z2[2:7,6:11]), 6)
unlink("youth_survey_cache", recursive = TRUE)
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1)
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\n", z2[2:7,6:11]), 6)
x
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "[{p}% HIHI]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\n", z2[2:7,6:11]), 6)
x
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "[\n{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\n", z2[2:7,6:11]), 6)
x
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1)
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "[\n{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\n", z2[2:7,6:11]), 6)
x
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1)
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "\n[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\n", z2[2:7,6:11]), 6)
x
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n\n({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "\n[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\n", z2[2:7,6:11]), 6)
x
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1)
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n\n({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "\n[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\n", z2[2:7,6:11]), 6)
x
x
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\\\\({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "\n[{p}%]", percent = "column", missing = "no")
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1)
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\\\\({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "\n[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\n", z2[2:7,6:11]), 6)
x
unlink("youth_survey_cache", recursive = TRUE)
unlink("youth_survey_cache", recursive = TRUE)
unlink("youth_survey_cache", recursive = TRUE)
unlink("youth_survey_cache", recursive = TRUE)
unlink("youth_survey_cache", recursive = TRUE)
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1)
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n} ({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], " ", z2[2:7,6:11]), 6)
x
x$table_body
paste_matrix <- function(df, wave_from, wave_to) {
x <- df %>% tbl_cross(row = {{wave_from}}, col = {{wave_to}}, statistic = "{n}\n({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = {{wave_from}}, col = {{wave_to}}, statistic = "\n[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "", z2[2:7,6:11]), 6)
return(x)
}
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1)
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n} ({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], " ", z2[2:7,6:11]), 6)
x$table_body
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\n", z2[2:7,6:11]), 6)
x$table_body[2:7,6:11]
x$table_body[2:7,6:11] %>% kable()
paste_matrix <- function(df, wave_from, wave_to) {
x <- df %>% tbl_cross(row = {{wave_from}}, col = {{wave_to}}, statistic = "{n}<br>({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = {{wave_from}}, col = {{wave_to}}, statistic = "<br>[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "", z2[2:7,6:11]), 6)
return(x)
}
unlink("youth_survey_cache", recursive = TRUE)
x
x$meta_data$stat_display
paste_matrix <- function(df, wave_from, wave_to) {
x <- df %>% tbl_cross(row = {{wave_from}}, col = {{wave_to}}, statistic = "{n}\n({p}%[{p}%])", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = {{wave_from}}, col = {{wave_to}}, statistic = "\n[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "", z2[2:7,6:11]), 6)
return(x)
}
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\n", z2[2:7,6:11]), 6)
x$table_body[2:7,6:11]
x <- df %>% tbl_cross(row = {{wave_from}}, col = {{wave_to}}, statistic = "{n}\n({p}%\n[{p}%])", percent = "row", missing = "no")
paste_matrix <- function(df, wave_from, wave_to) {
x <- df %>% tbl_cross(row = {{wave_from}}, col = {{wave_to}}, statistic = "{n}\n({p}%\n[{p}%])", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = {{wave_from}}, col = {{wave_to}}, statistic = "\n[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "", z2[2:7,6:11]), 6)
return(x)
}
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1)
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\n", z2[2:7,6:11]), 6)
x$table_body[2:7,6:11]
paste_matrix <- function(df, wave_from, wave_to) {
x <- df %>% tbl_cross(row = {{wave_from}}, col = {{wave_to}}, statistic = "{n}\n({p}%\n[{p}%])", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = {{wave_from}}, col = {{wave_to}}, statistic = "\n[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "", z2[2:7,6:11]), 6)
return(x)
}
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1)
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%\n[{p}%])", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\n", z2[2:7,6:11]), 6)
x$table_body[2:7,6:11]
x
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)\n[{p}%]", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\n", z2[2:7,6:11]), 6)
x
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)\n[{p}%]", percent = "row", missing = "no")
x
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)\n\n[{p}%]", percent = "row", missing = "no")
x
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)\\n[{p}%]", percent = "row", missing = "no")
x
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)\newline[{p}%]", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "[{p}%]", percent = "column", missing = "no")
x
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)\newline [{p}%]", percent = "row", missing = "no")
x
x
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%) \\ [{p}%]", percent = "row", missing = "no")
x
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%) \ [{p}%]", percent = "row", missing = "no")
x
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%) \ [{p}%]", percent = "row", missing = "no")
x
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)\n[{p}%]", percent = "row", missing = "no")
x
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)[{p}%]", percent = "row", missing = "no")
x
x
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}({p}%)[{p}%]", percent = "row", missing = "no")
x
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)[{p}%]", percent = "row", missing = "no")
x %>% as_kable_extra()
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)\n[{p}%]", percent = "row", missing = "no")
x %>% as_kable_extra()
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)\n", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "", z2[2:7,6:11]), 6)
x %>% as_kable_extra()
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "\n[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "", z2[2:7,6:11]), 6)
x %>% as_kable_extra()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\", z2[2:7,6:11]), 6)
x$table_body[2:7,6:11]
x %>% as_kable_extra()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\n", z2[2:7,6:11]), 6)
x %>% as_kable_extra()
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\n", z2[2:7,6:11]), 6)
x %>% as_kable_extra()
x %>% as_kable_extra(booktabs = T)
unlink("youth_survey_cache", recursive = TRUE)
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1)
packages <- c("haven", "tinytex", "survey", "bookdown", "gtsummary", "janitor", "labelled", "kableExtra", "stargazer", "tidyverse")
options(repos = c(CRAN = "http://cran.rstudio.com"))
# install packages not yet installed
installed_packages <- packages %in% rownames(installed.packages())
if (any(installed_packages == FALSE)) {
install.packages(packages[!installed_packages], silent = TRUE)
}
# load packages
invisible(lapply(packages, library, character.only = TRUE))
rm(packages, installed_packages)
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1)
# load data
# source("../code/master.R") # to rerun all code periodically
load("../data/ys_panel.rda")
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1)
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "{n}\n({p}%)", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "[{p}%]", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\n", z2[2:7,6:11]), 6)
x$table_body[2:7,6:11]
x %>% as_kable_extra(booktabs = T)
x %>% as_kable_extra(caption = "Transition Matrix example",
booktabs = T,
linesep = "",
position = "H",
escape = F)
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1)
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "\linebreak(\"{n}\", \"({p}%)\",", percent = "row", missing = "no")
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "\\linebreak(\"{n}\", \"({p}%)\",", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "\"[{p}%]\", align = \"c\"", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "\n", z2[2:7,6:11]), 6)
x$table_body[2:7,6:11]
x %>% as_kable_extra(caption = "Transition Matrix example",
booktabs = T,
linesep = "",
position = "H",
escape = F)
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "\\linebreak(\"{n}\", \"({p}%)\",", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "\"[{p}%]\", align = \"c\"", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "", z2[2:7,6:11]), 6)
x$table_body[2:7,6:11]
x %>% as_kable_extra(caption = "Transition Matrix example",
booktabs = T,
linesep = "",
position = "H",
escape = F)
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "\"[{p}%]\", align = \"c\")", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "", z2[2:7,6:11]), 6)
x <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "\\linebreak(\"{n}\", \"({p}%)\",", percent = "row", missing = "no")
y <- df %>% tbl_cross(row = wave_3, col = wave_4, statistic = "\"[{p}%]\", align = \"c\")", percent = "column", missing = "no")
z1 <- x$table_body %>% as.matrix()
z2 <- y$table_body %>% as.matrix()
x$table_body[2:7,6:11] <- matrix(paste0(z1[2:7,6:11], "", z2[2:7,6:11]), 6)
x$table_body[2:7,6:11]
x %>% as_kable_extra(caption = "Transition Matrix example",
booktabs = T,
linesep = "",
position = "H",
escape = F)
unlink("youth_survey_cache", recursive = TRUE)
x %>% as_kable_extra(booktabs = T) %>% fmt_markdown(columns = everything())
large_measurement <- rnorm(nrow(trial), mean = 1*10^2, sd = 1)
tbl <-
trial %>%
mutate(some_measurement = large_measurement, .before = 1) %>%
select(1:4) %>%
tbl_summary(
by = trt,
missing = "no",
# use "\n" to place a line break in statistic
statistic = some_measurement ~ "{median}\n({p25}, {p75})"
) %>%
add_p(pvalue_fun = ~style_pvalue(.x, digits = 2)) %>%
add_overall() %>%
# you'll need to fix the automatic footnote to remove the line break
modify_footnote(all_stat_cols() ~ "Median (IQR)") %>%
as_flex_table()
1
tbl <-
trial %>%
mutate(some_measurement = large_measurement, .before = 1) %>%
select(1:4) %>%
tbl_summary(
by = trt,
missing = "no",
# use "\n" to place a line break in statistic
statistic = some_measurement ~ "{median}\n({p25}, {p75})"
) %>%
add_p(pvalue_fun = ~style_pvalue(.x, digits = 2)) %>%
add_overall() %>%
# you'll need to fix the automatic footnote to remove the line break
modify_footnote(all_stat_cols() ~ "Median (IQR)") %>%
as_flex_table()
tbl
tbl <-
trial %>%
mutate(some_measurement = large_measurement, .before = 1) %>%
select(1:4) %>%
tbl_summary(
by = trt,
missing = "no",
# use "\n" to place a line break in statistic
statistic = some_measurement ~ "{median}\n({p25},\n{p75})"
) %>%
add_p(pvalue_fun = ~style_pvalue(.x, digits = 2)) %>%
add_overall() %>%
# you'll need to fix the automatic footnote to remove the line break
modify_footnote(all_stat_cols() ~ "Median (IQR)") %>%
as_flex_table()
tbl
tbl
unlink("youth_survey_cache", recursive = TRUE)
unlink("youth_survey_cache", recursive = TRUE)
fontspec::
library(fontspec)
library("fontspec")
install.packages("fontspec")
unlink("youth_survey_cache", recursive = TRUE)
ys_panel$status
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1, "Follow-up 2" = wave_2, "Follow-up 3" = wave_3, "Endline" = wave_4) %>%
mutate(status = recode(status,
`1` = "In School",
`2` = "NEET",
`3` = "Self-Employed",
`4` = "Employed",
`5` = "Apprentice"))
packages <- c("haven", "tinytex", "survey", "bookdown", "gtsummary", "janitor", "labelled", "kableExtra", "stargazer", "tidyverse")
options(repos = c(CRAN = "http://cran.rstudio.com"))
# install packages not yet installed
installed_packages <- packages %in% rownames(installed.packages())
if (any(installed_packages == FALSE)) {
install.packages(packages[!installed_packages], silent = TRUE)
}
# load packages
invisible(lapply(packages, library, character.only = TRUE))
rm(packages, installed_packages)
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1, "Follow-up 2" = wave_2, "Follow-up 3" = wave_3, "Endline" = wave_4) %>%
mutate(status = recode(status,
`1` = "In School",
`2` = "NEET",
`3` = "Self-Employed",
`4` = "Employed",
`5` = "Apprentice"))
rlang::last_error()
rlang::last_trace()
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1, "Follow-up 2" = wave_2, "Follow-up 3" = wave_3, "Endline" = wave_4) %>%
mutate(status = recode(status,
1 = "In School",
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1, "Follow-up 2" = wave_2, "Follow-up 3" = wave_3, "Endline" = wave_4) %>%
mutate(status = recode(status,
1L = "In School",
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1, "Follow-up 2" = wave_2, "Follow-up 3" = wave_3, "Endline" = wave_4) %>%
mutate(status = recode(status,
`1` = "In School",
`2` = "NEET",
`3` = "Self-Employed",
`4` = "Employed",
`5` = "Apprentice"))
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1, "Follow-up 2" = wave_2, "Follow-up 3" = wave_3, "Endline" = wave_4) %>%
dplyr::mutate(status = recode(status,
`1` = "In School",
`2` = "NEET",
`3` = "Self-Employed",
`4` = "Employed",
`5` = "Apprentice"))
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1, "Follow-up 2" = wave_2, "Follow-up 3" = wave_3, "Endline" = wave_4) %>%
mutate(status = recode(status, `1` = "In School",
`2` = "NEET",
`3` = "Self-Employed",
`4` = "Employed",
`5` = "Apprentice"))
df <- df %>%
mutate(status = recode(status, `1` = "In School",
`2` = "NEET",
`3` = "Self-Employed",
`4` = "Employed",
`5` = "Apprentice"))
mutate(status = recode(status, `1` = "In School")
df <- df %>%
df <- df %>%
mutate(status = recode(status, `1` = "In School",
`2` = "NEET"))
mutate(status = recode(status, `1` = "In School")
df <- df %>
df <- df %>
df <- df %>%
mutate(status = recode(status, `1` = "In School"))
rlang::last_error()
rlang::last_trace()
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1, "Follow-up 2" = wave_2, "Follow-up 3" = wave_3, "Endline" = wave_4)
df
df <- ys_panel %>% select(IDYouth, wave, status) %>% zap_labels() %>%
mutate(status = recode(status,
`1` = "In School",
`2` = "NEET",
`3` = "Self-Employed",
`4` = "Employed",
`5` = "Apprentice")) %>%
pivot_wider(id_cols = IDYouth, names_from = wave, names_prefix = "wave_", values_from = status) %>%
rename("Baseline" = wave_0, "Follow-up 1" = wave_1, "Follow-up 2" = wave_2, "Follow-up 3" = wave_3, "Endline" = wave_4)
unlink("youth_survey_cache", recursive = TRUE)
unlink("youth_survey_cache", recursive = TRUE)
install.packages("fontspec")
unlink("youth_survey_cache", recursive = TRUE)
unlink("youth_survey_cache", recursive = TRUE)
unlink("youth_survey_cache", recursive = TRUE)
unlink("youth_survey_cache", recursive = TRUE)
x$table_styling
x$table_styling[hide]
x$table_styling["hide"]
x$table_styling[,"hide"]
x$table_styling$header["hide"]
x$table_styling$header["hide"][5]
x$table_styling$header["hide"](5)
x$table_styling$header["hide",5]
x$table_styling$header["hide"][5]
x$table_styling$header["hide",5]
x$table_styling$header["hide"]
x$table_styling$header[5,"hide"]
unlink("youth_survey_cache", recursive = TRUE)
x$table_body
x$table_body[2:7,]
